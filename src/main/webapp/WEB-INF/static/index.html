<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>FiveG 后台管理系统</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="layui/css/layui.css">

    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo layui-hide-xs layui-bg-black">FiveG 后台管理系统</div>
        <!-- 头部区域（可配合layui 已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
            <!-- 移动端显示 -->
            <li class="layui-nav-item layui-show-xs-inline-block layui-hide-sm" lay-header-event="menuLeft">
                <i class="layui-icon layui-icon-spread-left"></i>
            </li>

            <li class="layui-nav-item layui-hide-xs"><a href="">nav 1</a></li>
            <li class="layui-nav-item layui-hide-xs"><a href="">nav 2</a></li>
            <li class="layui-nav-item layui-hide-xs"><a href="">nav 3</a></li>
            <li class="layui-nav-item">
                <a href="javascript:;">nav groups</a>
                <dl class="layui-nav-child">
                    <dd><a href="">menu 11</a></dd>
                    <dd><a href="">menu 22</a></dd>
                    <dd><a href="">menu 33</a></dd>
                </dl>
            </li>
        </ul>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item layui-hide layui-show-md-inline-block">
                <a href="javascript:;">
                    <img id="imgs" src="//tva1.sinaimg.cn/crop.0.0.118.118.180/5db11ff4gw1e77d3nqrv8j203b03cweg.jpg"
                         class="layui-nav-img">
                    <span id="span_username"></span>
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="system/userinfo.html" target="ifr">个人信息</a></dd>
                    <dd><a href="">设置</a></dd>
                    <dd><a href="javascript:location.href='/exit';">退出</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item" lay-header-event="menuRight" lay-unselect>
                <a href="javascript:;">
                    <i class="layui-icon layui-icon-more-vertical"></i>
                </a>
            </li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree" lay-filter="test" id="nav">
                <!--     <li class="layui-nav-item layui-nav-itemed">
                         <a class="" href="javascript:;">
                             <i class="layui-icon ">&#xe63a; 抑郁测试</i>

                         </a>
                         <dl class="layui-nav-child">
                             <dd><a href="sds/tblquestion.html" target="ifr">测试题目</a></dd>
                             <dd><a href="sds/tbltestplan.html" target="ifr">测试计划</a></dd>
                             <dd><a href="sds/tbltestresult.html" target="ifr">测试结果</a></dd>
                             <dd><a href="sds/tblstatistics.html" target="ifr">报表统计</a></dd>
                         </dl>
                     </li>
                     <li class="layui-nav-item layui-nav-itemed">
                         <a class="" href="javascript:;">
                             <i class="layui-icon ">&#xe653; 系统管理</i>
                         </a>
                         <dl class="layui-nav-child">
                             <dd><a href="system/tbldept.html" target="ifr">部门管理</a></dd>
                             <dd><a href="system/tblrole.html" target="ifr">角色管理</a></dd>
                             <dd><a href="system/menu.html" target="ifr">菜单管理</a></dd>
                             <dd><a href="system/user.html" target="ifr"> 用户管理</a></dd>
                         </dl>
                     </li>
                     <li class="layui-nav-item layui-nav-itemed">
                         <a class="" href="javascript:;">
                             <i class="layui-icon ">&#xe68d; 日志监控</i>
                         </a>
                         <dl class="layui-nav-child">
                             <dd><a href="log/log.html" target="ifr">操作日志</a></dd>
                         </dl>
                     </li>-->
            </ul>
        </div>
    </div>
    <div class="layui-body">
        <!-- 内容主体区域 -->
        <iframe name="ifr" src="welcome.html"
                tppabs="https://www.layuiweb.com/demo/layout-admin.html?from=demo"
                frameborder="0" id="demoAdmin" style="width: 100%; height: 800px; border-radius: 2px;"></iframe>
    </div>

    <div class="layui-footer">
        <!-- 底部固定区域 -->
        <p>© 2022 FiveG Management System. All Rights Reserved | Design by FiveG</a>
        </p>
    </div>
</div>
<script src="layui/layui.js" charset="utf-8"></script>
<script>
    //JS
    layui.use(['element', 'layer', 'util'], function () {
        var element = layui.element
            , layer = layui.layer
            , util = layui.util
            , $ = layui.$;
        $(function () {

            // 查询用户信息
            $.get(
                "/system/user/getUserOne",
                function (data) {
                    let msg = "欢迎回来 " + data.data.username;
                    $("#span_username").html(msg);
                    $("#imgs")[0].src = data.data.avatar;

                    var roleId = data.data.roleId
                    $.get({
                        url: '/system/menu/getTreeByParentId/',
                        data: {"parentId": 0, "roleId": roleId},
                        type: 'get',
                        success: function (data) {
                            $.each(data.data, function (index, val) {
                                let menu = "";
                                menu +=
                                    "<li class='layui-nav-item'>" +
                                    "<a href='javascript:;'>" +
                                    "<i class='" + val.icon + "'>  " + val.menuName + "</i>" +
                                    "</a>";
                                let menu2 = "";
                                $.get({
                                    url: '/system/menu/getTreeByParentId/',
                                    data: {"parentId": val.menuId, "roleId": roleId},
                                    type: 'get',
                                    success: function (data) {
                                        menu2 += "<dl class='layui-nav-child'>";
                                        $.each(data.data, function (index, val) {
                                            menu2 += "<dd>" +
                                                "<a href='" + val.url + "' target='ifr'>" + val.menuName + "</a>"
                                                + "</dd>";
                                        });
                                        menu2 += "</dl>"
                                        menu += menu2;
                                        menu += "</li>";
                                        $("#nav").append(menu);
                                        layui.element.init();
                                    }

                                });


                            });

                        }
                    })
                }
            );

        });
        //头部事件
        util.event('lay-header-event', {
            //左侧菜单事件
            menuLeft: function (othis) {
                layer.msg('展开左侧菜单的操作', {icon: 0});
            }
            , menuRight: function () {
                layer.open({
                    type: 1
                    , content: '<div style="padding: 15px;">处理右侧面板的操作</div>'
                    , area: ['260px', '100%']
                    , offset: 'rt' //右上角
                    , anim: 5
                    , shadeClose: true
                });
            }
        });

    });

</script>


</body>
</html>